mode: rule
mixed-port: 7897
allow-lan: false
log-level: info
external-controller: 127.0.0.1:9097
secret: WQ2121211122
profile:
  store-selected: true
  store-fake-ip: true
skip-auth-prefixes:
  - 127.0.0.1/8
  - '::1/128'
bind-address: '*'
tun:
  enable: false
  stack: gvisor
  dns-hijack:
    - any:53
  strict-route: false
  auto-route: true
  auto-detect-interface: true
  device: Mihomo
  mtu: 1500
keep-alive-interval: 15
sniffer:
  enable: true
  parse-pure-ip: true
  sniff:
    HTTP:
      ports:
        - 80
        - 8080-8880
      override-destination: true
    TLS:
      ports:
        - 443
        - 8443
    QUIC:
      ports:
        - 443
        - 8443
  force-domain: []
  skip-domain:
    - Mijia Cloud
tcp-concurrent: true
dns:
  enabled: true
  nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  fallback:
    - tls://8.8.4.4
    - tls://1.1.1.1
  enable: true
  ipv6: false
  enhanced-mode: fake-ip
  listen: ':1053'
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - '*'
    - +.lan
    - +.local
    - +.msftncsi.com
    - +.msftconnecttest.com
  proxy-server-nameserver:
    - https://dns.alidns.com/dns-query
    - https://doh.pub/dns-query
  nameserver-policy:
    geosite:cn,private:
      - https://doh.pub/dns-query
      - https://dns.alidns.com/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32
geo-update-interval: 24
geodata-mode: true
global-client-fingerprint: chrome
geox-url:
  geoip: >-
    https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geoip-lite.dat
  geosite: https://fastly.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@release/geosite.dat
  mmdb: https://cdn.jsdelivr.net/gh/Hackl0us/GeoIP2-CN@release/Country.mmdb
unified-delay: false
geo-auto-update: true
find-process-mode: strict
proxies: []
proxy-groups:
  - name: Final
    type: select
    proxies:
      - DIRECT
      - Global
      - Proxy
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Final.png
  - name: Proxy
    type: select
    proxies:
      - DIRECT
      - .*
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Proxy.png
  - name: Global
    type: select
    proxies:
      - Proxy
      - Auto
      - Balance
      - Fallback
      - HongKong
      - TaiWan
      - Singapore
      - Japan
      - America
      - Others
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Global.png
  - name: Mainland
    type: select
    proxies:
      - DIRECT
      - Proxy
      - Auto
      - Balance
      - Fallback
      - HongKong
      - TaiWan
      - Singapore
      - Japan
      - America
      - Others
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Round_Robin.png
  - name: ArtIntel
    type: select
    proxies:
      - Proxy
      - America
      - Japan
      - Singapore
      - TaiWan
      - HongKong
      - Others
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Copilot.png
  - name: YouTube
    type: select
    proxies:
      - Proxy
      - Auto
      - Balance
      - Fallback
      - HongKong
      - TaiWan
      - Singapore
      - Japan
      - America
      - Others
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/YouTube.png
  - name: BiliBili
    type: select
    proxies:
      - DIRECT
      - HongKong
      - TaiWan
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/bilibili.png
  - name: Streaming
    type: select
    proxies:
      - Proxy
      - Auto
      - Balance
      - Fallback
      - HongKong
      - TaiWan
      - Singapore
      - Japan
      - America
      - Others
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/ForeignMedia.png
  - name: Telegram
    type: select
    proxies:
      - Proxy
      - Auto
      - Balance
      - Fallback
      - HongKong
      - TaiWan
      - Singapore
      - Japan
      - America
      - Others
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Telegram.png
  - name: Google
    type: select
    proxies:
      - Proxy
      - Auto
      - Balance
      - Fallback
      - HongKong
      - TaiWan
      - Singapore
      - Japan
      - America
      - Others
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Google.png
  - name: Games
    type: select
    proxies:
      - Proxy
      - Auto
      - Balance
      - Fallback
      - HongKong
      - TaiWan
      - Singapore
      - Japan
      - America
      - Others
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Game.png
  - name: HongKong
    type: url-test
    url: http://www.gstatic.com/generate_204
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Hong_Kong.png
    interval: 300
    tolerance: 20
    timeout: 2000
    lazy: true
    proxies: []
  - name: TaiWan
    type: url-test
    url: http://www.gstatic.com/generate_204
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Taiwan.png
    interval: 300
    tolerance: 20
    timeout: 2000
    lazy: true
    proxies:
      - DIRECT
  - name: Singapore
    type: url-test
    url: http://www.gstatic.com/generate_204
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Singapore.png
    interval: 300
    tolerance: 20
    timeout: 2000
    lazy: true
    proxies: []
  - name: Japan
    type: url-test
    url: http://www.gstatic.com/generate_204
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Japan.png
    interval: 300
    tolerance: 20
    timeout: 2000
    lazy: true
    proxies: []
  - name: America
    type: url-test
    url: http://www.gstatic.com/generate_204
    icon: >-
      https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/United_States.png
    interval: 300
    tolerance: 20
    timeout: 2000
    lazy: true
    proxies: []
  - name: Others
    type: url-test
    url: http://www.gstatic.com/generate_204
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/World_Map.png
    interval: 300
    tolerance: 20
    timeout: 2000
    lazy: true
    proxies: []
  - name: Auto
    type: url-test
    url: http://www.gstatic.com/generate_204
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Auto.png
    interval: 300
    tolerance: 20
    timeout: 2000
    lazy: true
    proxies: []
  - name: Balance
    type: load-balance
    url: http://www.gstatic.com/generate_204
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Available.png
    interval: 300
    lazy: true
    proxies: []
    strategy: consistent-hashing
  - name: Fallback
    type: fallback
    url: http://www.gstatic.com/generate_204
    icon: https://fastly.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Bypass.png
    interval: 300
    lazy: true
    proxies: []
rules:
  - AND,(AND,(DST-PORT,443),(NETWORK,UDP)),(NOT,((GEOIP,CN,no-resolve))),REJECT
  - GEOSITE,Private,DIRECT
  - GEOSITE,Bing,ArtIntel
  - GEOSITE,Openai,ArtIntel
  - GEOSITE,Category-games@cn,Mainland
  - GEOSITE,Category-games,Games
  - GEOSITE,Github,Global
  - GEOIP,Telegram,Telegram,no-resolve
  - GEOSITE,Bilibili,BiliBili
  - GEOSITE,Youtube,YouTube
  - GEOSITE,Disney,Streaming
  - GEOSITE,Netflix,Streaming
  - GEOSITE,HBO,Streaming
  - GEOSITE,Primevideo,Streaming
  - GEOSITE,Google,Google
  - GEOSITE,Microsoft@cn,Mainland
  - GEOSITE,Apple@cn,Mainland
  - GEOSITE,Geolocation-!cn,Global
  - GEOSITE,CN,Mainland
  - GEOIP,CN,Mainland,no-resolve
  - MATCH,Final
